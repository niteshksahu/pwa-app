<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>PwaApp</title>
  <base href="./">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="manifest" href="./manifest.webmanifest">
  <meta name="theme-color" content="#1976d2">

  <link rel="icon" type="image/png" sizes="192x192" href="./assets/icons/icon-192x192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="./assets/icons/icon-512x512.png">
  <link rel="apple-touch-icon" href="./assets/icons/icon-192x192.png">

  <meta name="description" content="Netflix-like PWA app">

  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="mobile-web-app-capable" content="yes">
</head>
<body>
  <app-root></app-root>
  <noscript>Please enable JavaScript to continue using this application.</noscript>
  <script>
document.addEventListener('keydown', function(event) {
  event.preventDefault(); // Prevent default scrolling/browser actions
  const focusable = Array.from(document.querySelectorAll('a, button, input, .card, [tabindex]:not([tabindex="-1"])')); // All focusable elements
  let currentIndex = focusable.indexOf(document.activeElement);

  switch (event.key) {
    case 'ArrowUp':
      moveFocus(currentIndex, -1, focusable); // Move up (previous)
      break;
    case 'ArrowDown':
      moveFocus(currentIndex, 1, focusable); // Move down (next)
      break;
    case 'ArrowLeft':
    case 'ArrowRight':
      const row = document.activeElement.closest('.row'); // Assuming .row for content rows
      if (row) {
        row.scrollBy(event.key === 'ArrowLeft' ? -200 : 200, 0); // Horizontal scroll by ~thumbnail width
      }
      break;
    case 'Enter':
      if (document.activeElement) document.activeElement.click();
      break;
    case 'Backspace':
    case 'Escape':
      history.back();
      break;
  }
});

function moveFocus(currentIndex, direction, focusable) {
  let newIndex = currentIndex + direction;
  while (newIndex >= 0 && newIndex < focusable.length) {
    if (focusable[newIndex].offsetParent !== null) { // Visible element
      focusable[newIndex].focus();
      focusable[newIndex].scrollIntoView({ behavior: 'smooth', block: 'nearest' }); // Scroll into view
      break;
    }
    newIndex += direction;
  }
}

// Enable keyboard focus styles
document.addEventListener('keydown', () => document.body.classList.add('using-keyboard'));
document.addEventListener('mousedown', () => document.body.classList.remove('using-keyboard'));
</script>
</body>
</html>
